<script>
  function showUser(data) {
    document.getElementById("user").innerHTML = data.email;
  }

  function generateInstituteSelect(data) { // створюємо випадний список для вибору інституту
    const institutes = Object.values(data).map(el => {
      return {
        key: el.idinstitute,
        value: el.nameinstitute
      }
    });
    institutes.unshift({
      key: 0,
      value: "Виберіть інститут"
    });
    document.getElementById("institute").innerHTML = generateSelect(institutes, "select-institute");
  }

  function generateEducationalDegreeSelect(data) { // створюємо випадний список для вибору освітнього ступеня
    const educationalDegree = Object.values(data).map(el => {
      return {
        key: el.educationaldegreeid,
        value: el.educationaldegreename
      }
    });
    educationalDegree.unshift({
      key: 0,
      value: "Виберіть освітній рівень"
    });
    document.getElementById("educationalDegree").innerHTML = generateSelect(educationalDegree,
      "select-educationalDegree");
  }

  function generateFormTrainingSelect(data) { // створюємо випадний список для вибору форми навчання
    const formTraining = Object.values(data).map(el => {
      return {
        key: el.formtrainingid,
        value: el.formtrainingname
      }
    });
    formTraining.unshift({
      key: 0,
      value: "Виберіть форму навчання"
    });
    document.getElementById("formTraining").innerHTML = generateSelect(formTraining, "select-formTraining");
  }

  function generateGroupsSelect(data) { // створюємо випадний список для вибору групи
    const groups = Object.values(data).map(el => {
      return {
        key: el.groupId,
        value: el.name
      }
    });
    groups.unshift({
      key: 0,
      value: "Виберіть групу"
    });
    document.getElementById("groups").innerHTML = generateSelect(groups, "select-groups");
  }

  function generateAddButton() {
    document.getElementById("addNewForm").innerHTML = "<button name='createNewForm'>Plus</button>"
  }

  function generateForm() {
    let form = document.getElementById("form");
    form.innerHTML =
      `<div class="row"><label for="academicDiscipline">Навчальна дисципліна</label><input type="text" id="academicDiscipline" placeholder="повна назва дисципліни за навчальним планом" value="${evaluationListData.academicDiscipline}"></div>`;
    form.innerHTML +=
      `<div class="row"><label for="controlForm">Форма підсумкового контролю</label><input type="text" id="controlForm" placeholder="екзамен/залік" value="${evaluationListData.controlForm}"></div>`;
    form.innerHTML +=
      `<div class="row"><label for="date">Дата контролю</label><input type="text" id="date" value="${evaluationListData.date}"></div>`;
    form.innerHTML +=
      `<div class="row"><label for="teacherFullName">посади і ПІБ викладачів, які виставляють підсумкову оцінку</label><input type="text" id="teacherFullName" value="${evaluationListData.teacherFullName}"></div>`;
    form.innerHTML +=
      `<div class="row"><label for="aditionalTeachers">посади і ПІБ викладачів, які проводили практичні (семінарські, лабораторні) заняття й здійснювали поточний контроль</label><input type="text" id="aditionalTeachers" placeholder="введіть через кому" value="${evaluationListData.aditionalTeachers.join(", ")}"></div>`;

    let arr = evaluationListData.students;
    let result,
      tableHeader = ["№", "Прізвище, ініціали студента", "Поточний контроль", "Підсумковий семестровий контроль", "ЗВО"],
      tableMain = [],
      num = 1;

    arr.forEach(element => {
      result = Object.keys(element).map(function (key) {
        return element[key];
      });
      result.splice(1, 1);
      result.unshift(num);
      result[2] = `<input type="text" name="tableInput" id="${"currentGrade-" + num}">`;
      result[3] = `<input type="text" name="tableInput" id="${"semesterGrade-" + num}">`;
        ++num;
        tableMain.push(result);
    });
    tableMain.unshift(tableHeader);
    console.log(tableMain);
    form.innerHTML += createTable(tableMain, "formTable");
  }
</script>